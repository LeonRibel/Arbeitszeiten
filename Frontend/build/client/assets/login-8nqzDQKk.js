import{w,r as t}from"./chunk-FGUA77HG-DXx5pbNv.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{H as v}from"./heading-Cc1lyjB0.js";import{F as m,L as h,I as p}from"./input-C_GS3zNF.js";import{B as N}from"./button-Bh0dwTEB.js";import{B as x}from"./config-Diokydjp.js";import"./clsx-B-dksMZM.js";import"./link-DeWrvwtq.js";import"./index-Bon2tSw_.js";const A=w(function(){const[i,u]=t.useState(""),[o,f]=t.useState(""),[d,a]=t.useState(""),[n,l]=t.useState(!1);t.useEffect(()=>{fetch(x+"/user",{credentials:"include",headers:{Accept:"application/json"}}).then(s=>s.json()).then(s=>{s.authenticated&&(window.location.href="/")}).catch(()=>{})},[]);const g=async s=>{if(s.preventDefault(),a(""),l(!0),!i||!o){a("Bitte alle Felder ausfÃ¼llen"),l(!1);return}try{const r=await fetch(x+"/login",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:i,password:o})}),c=await r.json();if(r.ok&&c.success){const j=c.token;localStorage.setItem("token",j),window.location.href="/"}else a(c.message||"Login fehlgeschlagen")}catch(r){console.error("Login error:",r),a("Login fehlgeschlagen")}finally{l(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"text-2xl",children:"Login"}),e.jsx("p",{className:"mt-2 text-sm",children:"Bitte melde dich an"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs(m,{children:[e.jsx(h,{children:"E-Mail"}),e.jsx(p,{type:"email",value:i,onChange:s=>u(s.target.value),disabled:n,autoComplete:"email"})]}),e.jsxs(m,{children:[e.jsx(h,{children:"Password"}),e.jsx(p,{type:"password",value:o,onChange:s=>f(s.target.value),disabled:n,autoComplete:"current-password"})]}),d&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:d}),e.jsx(N,{type:"submit",className:"w-full",disabled:n,children:n?"Logging in...":"Login"})]}),e.jsxs("div",{className:"text-center text-sm space-y-2",children:[e.jsx("div",{children:e.jsx("a",{href:"/settings",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Passwort vergessen?"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Noch kein Konto? "}),e.jsx("a",{href:"/register",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Registrieren"})]})]})]})})});export{A as default};
