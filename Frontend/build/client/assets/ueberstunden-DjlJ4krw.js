import{w as T,r as c}from"./chunk-FGUA77HG-DXx5pbNv.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{T as z,a as v,b as f,c as i,d as E,e as o}from"./table-B07IBsFq.js";import{f as L}from"./fetchApi-CVhRWstt.js";import{u as N}from"./useTranslation-DlJuNdwr.js";import"./clsx-B-dksMZM.js";import"./link-DeWrvwtq.js";import"./config-Diokydjp.js";const R=T(function(){const[l,p]=c.useState(null),{t:n,i18n:d}=N(),[F,w]=c.useState(()=>localStorage.getItem("language")||"de");c.useEffect(()=>{const t=localStorage.getItem("language");t&&d.language!==t&&(d.changeLanguage(t),w(t))},[d]),c.useEffect(()=>{L("/Ueberstunden").then(t=>{console.log("Dashboard data:",t),p(t)}).catch(t=>{console.error("Fetch error:",t)})},[]);const u=t=>{let r=0;return t.forEach(a=>{const h=new Date(a.start),s=(new Date(a.ende).getTime()-h.getTime())/(1e3*60*60);r+=s}),Math.round(r*100)/100},S=t=>{const r=u(t);return Math.round((r-8)*100)/100};return e.jsx("main",{children:l&&l.arbeitszeiten?e.jsx("div",{children:Object.entries(l.arbeitszeiten.jahre).map(([t,r])=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mt-6 mb-4 text-white",children:[n("year")," ",t]}),Object.entries(r.monate).map(([a,h])=>e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-3 text-white",children:[n("month")," ",a]}),e.jsxs(z,{children:[e.jsx(v,{children:e.jsxs(f,{children:[e.jsx(i,{children:n("date")}),e.jsx(i,{children:n("start")}),e.jsx(i,{children:n("end")}),e.jsx(i,{children:n("workingHours")}),e.jsx(i,{children:n("overtime")})]})}),e.jsx(E,{children:Object.entries(h.tage).map(([g,s])=>{const j=u(s.arbeitszeiten),m=S(s.arbeitszeiten);return s.arbeitszeiten.map((b,x)=>e.jsxs(f,{children:[x===0&&e.jsx(e.Fragment,{children:e.jsx(o,{rowSpan:s.arbeitszeiten.length,children:new Date(b.tag).toLocaleDateString()})}),e.jsx(o,{children:new Date(b.start).toLocaleTimeString()}),e.jsx(o,{children:new Date(b.ende).toLocaleTimeString()}),x===0&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{rowSpan:s.arbeitszeiten.length,children:[j,"h"]}),e.jsx(o,{rowSpan:s.arbeitszeiten.length,children:e.jsxs("span",{className:j>10?"bg-zinc-900 text-red-600 font-semibold":m>=0?"bg-zinc-900 text-green-600 font-semibold":"text-orange-600 font-semibold",children:[m>0?"+":"",m,"h"]})})]})]},`${g}-${x}`))})})]})]},`${t}-${a}`))]},t))}):e.jsx("div",{children:n("loading")})})});export{R as default};
