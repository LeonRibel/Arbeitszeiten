import{w as S,r as t}from"./chunk-FGUA77HG-DXx5pbNv.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{H as R}from"./heading-Cc1lyjB0.js";import{F as c,L as d,I as m}from"./input-C_GS3zNF.js";import{B as E}from"./button-Bh0dwTEB.js";import{B as j}from"./config-Diokydjp.js";import"./clsx-B-dksMZM.js";import"./link-DeWrvwtq.js";import"./index-Bon2tSw_.js";const D=S(function(){const[p,w]=t.useState(""),[x,v]=t.useState(""),[g,y]=t.useState(""),[n,b]=t.useState(""),[h,N]=t.useState(""),[f,a]=t.useState(""),[r,i]=t.useState(!1);t.useEffect(()=>{fetch(j+"/user",{credentials:"include",headers:{Accept:"application/json"}}).then(s=>s.json()).then(s=>{s.authenticated&&(window.location.href="/")}).catch(()=>{})},[]);const C=async s=>{if(s.preventDefault(),a(""),i(!0),!p||!x||!g||!n||!h){a("Bitte alle Felder ausfüllen"),i(!1);return}if(n!==h){a("Passwörter stimmen nicht überein"),i(!1);return}if(n.length<8){a("Passwort muss mindestens 8 Zeichen lang sein"),i(!1);return}try{const u=await fetch(j+"/register",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({vorname:p,nachname:x,email:g,password:n,password_confirmation:h})}),o=await u.json();if(u.ok&&o.success){const l=o.token;localStorage.setItem("token",l),window.location.href="/"}else if(o.errors){const l=Object.values(o.errors)[0];a(Array.isArray(l)?l[0]:String(l))}else a(o.message||"Registrierung fehlgeschlagen")}catch(u){console.error("Register error:",u),a("Registrierung fehlgeschlagen")}finally{i(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"text-2xl",children:"Registrieren"}),e.jsx("p",{className:"mt-2 text-sm",children:"Erstelle ein neues Konto"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(c,{children:[e.jsx(d,{children:"Vorname"}),e.jsx(m,{type:"text",value:p,onChange:s=>w(s.target.value),disabled:r,autoComplete:"given-name"})]}),e.jsxs(c,{children:[e.jsx(d,{children:"Nachname"}),e.jsx(m,{type:"text",value:x,onChange:s=>v(s.target.value),disabled:r,autoComplete:"family-name"})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:"E-Mail"}),e.jsx(m,{type:"email",value:g,onChange:s=>y(s.target.value),disabled:r,autoComplete:"email"})]}),e.jsxs(c,{children:[e.jsx(d,{children:"Passwort"}),e.jsx(m,{type:"password",value:n,onChange:s=>b(s.target.value),disabled:r,autoComplete:"new-password"})]}),e.jsxs(c,{children:[e.jsx(d,{children:"Passwort bestätigen"}),e.jsx(m,{type:"password",value:h,onChange:s=>N(s.target.value),disabled:r,autoComplete:"new-password"})]}),f&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:f}),e.jsx(E,{type:"submit",className:"w-full",disabled:r,children:r?"Registrieren...":"Registrieren"})]}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Bereits ein Konto? "}),e.jsx("a",{href:"/login",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Anmelden"})]})]})})});export{D as default};
